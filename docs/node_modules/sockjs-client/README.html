<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>node_modules/sockjs-client/README · Underbase</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;sockjs-client&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#sockjs-client&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;SockJS-client&lt;/h1&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="node_modules/sockjs-client/README · Underbase"/><meta property="og:type" content="website"/><meta property="og:url" content="https://sundowndev.github.io/underbase/"/><meta property="og:description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;sockjs-client&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#sockjs-client&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;SockJS-client&lt;/h1&gt;
"/><meta property="og:image" content="https://sundowndev.github.io/underbase/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://sundowndev.github.io/underbase/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/underbase/img/logo.svg"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://sundowndev.github.io/underbase/blog/atom.xml" title="Underbase Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://sundowndev.github.io/underbase/blog/feed.xml" title="Underbase Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/underbase/js/scrollSpy.js"></script><link rel="stylesheet" href="/underbase/css/main.css"/><script src="/underbase/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/underbase/"><img class="logo" src="/underbase/img/logo.svg" alt="Underbase"/><h2 class="headerTitleWithLogo">Underbase</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/underbase/docs/installation" target="_self">Guides</a></li><li class=""><a href="/underbase/docs/api" target="_self">API</a></li><li class=""><a href="/underbase/blog/" target="_self">Release notes</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">node_modules/sockjs-client/README</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="sockjs-client"></a><a href="#sockjs-client" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SockJS-client</h1>
<p><a href="https://www.npmjs.com/package/sockjs-client"><img src="https://img.shields.io/npm/v/sockjs-client.svg?style=flat-square" alt="npm version"></a><a href="https://travis-ci.org/sockjs/sockjs-client"><img src="https://img.shields.io/travis/sockjs/sockjs-client/master.svg?style=flat-square" alt="Build Status"></a><a href="https://david-dm.org/sockjs/sockjs-client"><img src="https://img.shields.io/david/sockjs/sockjs-client.svg?style=flat-square" alt="Dependencies"></a><a href="https://gitter.im/sockjs/sockjs-client"><img src="https://img.shields.io/badge/Chat-gitter.im-blue.svg?style=flat-square" alt="Chat"></a>
<a href="https://saucelabs.com/u/brycekahle"><img src="https://saucelabs.com/buildstatus/brycekahle" alt="Sauce Test Status"></a></p>
<p>SockJS is a browser JavaScript library that provides a WebSocket-like
object. SockJS gives you a coherent, cross-browser, Javascript API
which creates a low latency, full duplex, cross-domain communication
channel between the browser and the web server.</p>
<p>Under the hood SockJS tries to use native WebSockets first. If that
fails it can use a variety of browser-specific transport protocols and
presents them through WebSocket-like abstractions.</p>
<p>SockJS is intended to work for all modern browsers and in environments
which don't support the WebSocket protocol -- for example, behind restrictive
corporate proxies.</p>
<p>SockJS-client does require a server counterpart:</p>
<ul>
<li><a href="https://github.com/sockjs/sockjs-node">SockJS-node</a> is a SockJS
server for Node.js.</li>
</ul>
<p>Philosophy:</p>
<ul>
<li>The API should follow
<a href="https://www.w3.org/TR/websockets/">HTML5 Websockets API</a> as
closely as possible.</li>
<li>All the transports must support cross domain connections out of the
box. It's possible and recommended to host a SockJS server on a
different server than your main web site.</li>
<li>There is support for at least one streaming protocol for every
major browser.</li>
<li>Streaming transports should work cross-domain and
should support cookies (for cookie-based sticky sessions).</li>
<li>Polling transports are used as a fallback for old browsers and
hosts behind restrictive proxies.</li>
<li>Connection establishment should be fast and lightweight.</li>
<li>No Flash inside (no need to open port 843 - which doesn't work
through proxies, no need to host 'crossdomain.xml', no need
<a href="https://github.com/gimite/web-socket-js/issues/49">to wait for 3 seconds</a>
in order to detect problems)</li>
</ul>
<p>Subscribe to
<a href="https://groups.google.com/forum/#!forum/sockjs">SockJS mailing list</a> for
discussions and support.</p>
<p>SockJS family:</p>
<ul>
<li><a href="https://github.com/sockjs/sockjs-client">SockJS-client</a> JavaScript client library</li>
<li><a href="https://github.com/sockjs/sockjs-node">SockJS-node</a> Node.js server</li>
<li><a href="https://github.com/sockjs/sockjs-erlang">SockJS-erlang</a> Erlang server</li>
<li><a href="https://github.com/flaviogrossi/sockjs-cyclone">SockJS-cyclone</a> Python/Cyclone/Twisted server</li>
<li><a href="https://github.com/MrJoes/sockjs-tornado">SockJS-tornado</a> Python/Tornado server</li>
<li><a href="https://github.com/DesertBus/sockjs-twisted/">SockJS-twisted</a> Python/Twisted server</li>
<li><a href="https://github.com/aio-libs/sockjs/">SockJS-aiohttp</a> Python/Aiohttp server</li>
<li><a href="https://projects.spring.io/spring-framework">Spring Framework</a> Java <a href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/web.html#websocket-fallback-sockjs-client">client</a> &amp; server</li>
<li><a href="https://github.com/vert-x/vert.x">vert.x</a> Java/vert.x server</li>
<li><a href="https://xitrum-framework.github.io/">Xitrum</a> Scala server</li>
<li><a href="https://github.com/Atmosphere/atmosphere">Atmosphere Framework</a> JavaEE Server, Play Framework, Netty, Vert.x</li>
<li><a href="https://github.com/fafhrd91/actix-sockjs">Actix SockJS</a> Rust Server, Actix Framework</li>
</ul>
<p>Work in progress:</p>
<ul>
<li><a href="https://github.com/nyarly/sockjs-ruby">SockJS-ruby</a></li>
<li><a href="https://github.com/cgbystrom/sockjs-netty">SockJS-netty</a></li>
<li><a href="https://github.com/ksava/sockjs-gevent">SockJS-gevent</a> (<a href="https://github.com/njoyce/sockjs-gevent">SockJS-gevent fork</a>)</li>
<li><a href="https://github.com/fafhrd91/pyramid_sockjs">pyramid-SockJS</a></li>
<li><a href="https://github.com/wildcloud/wildcloud-websockets">wildcloud-websockets</a></li>
<li><a href="https://github.com/Palmik/wai-sockjs">wai-SockJS</a></li>
<li><a href="https://github.com/vti/sockjs-perl">SockJS-perl</a></li>
<li><a href="https://github.com/igm/sockjs-go/">SockJS-go</a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="getting-started"></a><a href="#getting-started" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting Started</h2>
<p>SockJS mimics the <a href="https://www.w3.org/TR/websockets/">WebSockets API</a>,
but instead of <code>WebSocket</code> there is a <code>SockJS</code> Javascript object.</p>
<p>First, you need to load the SockJS JavaScript library. For example, you can
put that in your HTML head:</p>
<pre><code class="hljs css language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>After the script is loaded you can establish a connection with the
SockJS server. Here's a simple example:</p>
<pre><code class="hljs css language-javascript"> <span class="hljs-keyword">var</span> sock = <span class="hljs-keyword">new</span> SockJS(<span class="hljs-string">'https://mydomain.com/my_prefix'</span>);
 sock.onopen = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
     <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'open'</span>);
     sock.send(<span class="hljs-string">'test'</span>);
 };

 sock.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
     <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'message'</span>, e.data);
     sock.close();
 };

 sock.onclose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
     <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'close'</span>);
 };

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="sockjs-client-api"></a><a href="#sockjs-client-api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SockJS-client API</h2>
<h3><a class="anchor" aria-hidden="true" id="sockjs-class"></a><a href="#sockjs-class" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SockJS class</h3>
<p>Similar to the 'WebSocket' API, the 'SockJS' constructor takes one, or more arguments:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">var</span> sockjs = <span class="hljs-keyword">new</span> SockJS(url, _reserved, options);
</code></pre>
<p><code>url</code> may contain a query string, if one is desired.</p>
<p>Where <code>options</code> is a hash which can contain:</p>
<ul>
<li><p><strong>server (string)</strong></p>
<p>String to append to url for actual data connection. Defaults to a random 4 digit number.</p></li>
<li><p><strong>transports (string OR array of strings)</strong></p>
<p>Sometimes it is useful to disable some fallback transports. This
option allows you to supply a list transports that may be used by
SockJS. By default all available transports will be used.</p></li>
<li><p><strong>sessionId (number OR function)</strong></p>
<p>Both client and server use session identifiers to distinguish connections.
If you specify this option as a number, SockJS will use its random string
generator function to generate session ids that are N-character long
(where N corresponds to the number specified by <strong>sessionId</strong>).
When you specify this option as a function, the function must return a
randomly generated string. Every time SockJS needs to generate a session
id it will call this function and use the returned string directly.
If you don't specify this option, the default is to use the default random
string generator to generate 8-character long session ids.</p></li>
</ul>
<p>Although the 'SockJS' object tries to emulate the 'WebSocket'
behaviour, it's impossible to support all of its features. An
important SockJS limitation is the fact that you're not allowed to
open more than one SockJS connection to a single domain at a time.
This limitation is caused by an in-browser limit of outgoing
connections - usually <a href="https://stackoverflow.com/questions/985431/max-parallel-http-connections-in-a-browser">browsers don't allow opening more than two
outgoing connections to a single domain</a>. A single SockJS session
requires those two connections - one for downloading data, the other for
sending messages.  Opening a second SockJS session at the same time
would most likely block, and can result in both sessions timing out.</p>
<p>Opening more than one SockJS connection at a time is generally a
bad practice. If you absolutely must do it, you can use
multiple subdomains, using a different subdomain for every
SockJS connection.</p>
<h2><a class="anchor" aria-hidden="true" id="supported-transports-by-browser-html-served-from-http-or-https"></a><a href="#supported-transports-by-browser-html-served-from-http-or-https" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supported transports, by browser (html served from http:// or https://)</h2>
<table>
<thead>
<tr><th><em>Browser</em></th><th><em>Websockets</em></th><th><em>Streaming</em></th><th><em>Polling</em></th></tr>
</thead>
<tbody>
<tr><td>IE 6, 7</td><td>no</td><td>no</td><td>jsonp-polling</td></tr>
<tr><td>IE 8, 9 (cookies=no)</td><td>no</td><td>xdr-streaming †</td><td>xdr-polling †</td></tr>
<tr><td>IE 8, 9 (cookies=yes)</td><td>no</td><td>iframe-htmlfile</td><td>iframe-xhr-polling</td></tr>
<tr><td>IE 10</td><td>rfc6455</td><td>xhr-streaming</td><td>xhr-polling</td></tr>
<tr><td>Chrome 6-13</td><td>hixie-76</td><td>xhr-streaming</td><td>xhr-polling</td></tr>
<tr><td>Chrome 14+</td><td>hybi-10 / rfc6455</td><td>xhr-streaming</td><td>xhr-polling</td></tr>
<tr><td>Firefox &lt;10</td><td>no ‡</td><td>xhr-streaming</td><td>xhr-polling</td></tr>
<tr><td>Firefox 10+</td><td>hybi-10 / rfc6455</td><td>xhr-streaming</td><td>xhr-polling</td></tr>
<tr><td>Safari 5.x</td><td>hixie-76</td><td>xhr-streaming</td><td>xhr-polling</td></tr>
<tr><td>Safari 6+</td><td>rfc6455</td><td>xhr-streaming</td><td>xhr-polling</td></tr>
<tr><td>Opera 10.70+</td><td>no ‡</td><td>iframe-eventsource</td><td>iframe-xhr-polling</td></tr>
<tr><td>Opera 12.10+</td><td>rfc6455</td><td>xhr-streaming</td><td>xhr-polling</td></tr>
<tr><td>Konqueror</td><td>no</td><td>no</td><td>jsonp-polling</td></tr>
</tbody>
</table>
<ul>
<li><p><strong>†</strong>: IE 8+ supports [XDomainRequest]<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>, which is
essentially a modified AJAX/XHR that can do requests across
domains. But unfortunately it doesn't send any cookies, which
makes it inappropriate for deployments when the load balancer uses
JSESSIONID cookie to do sticky sessions.</p></li>
<li><p><strong>‡</strong>: Firefox 4.0 and Opera 11.00 and shipped with disabled
Websockets &quot;hixie-76&quot;. They can still be enabled by manually
changing a browser setting.</p></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="supported-transports-by-browser-html-served-from-file"></a><a href="#supported-transports-by-browser-html-served-from-file" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supported transports, by browser (html served from file://)</h2>
<p>Sometimes you may want to serve your html from &quot;file://&quot; address - for
development or if you're using PhoneGap or similar technologies. But
due to the Cross Origin Policy files served from &quot;file://&quot; have no
Origin, and that means some of SockJS transports won't work. For this
reason the SockJS transport table is different than usually, major
differences are:</p>
<table>
<thead>
<tr><th><em>Browser</em></th><th><em>Websockets</em></th><th><em>Streaming</em></th><th><em>Polling</em></th></tr>
</thead>
<tbody>
<tr><td>IE 8, 9</td><td>same as above</td><td>iframe-htmlfile</td><td>iframe-xhr-polling</td></tr>
<tr><td>Other</td><td>same as above</td><td>iframe-eventsource</td><td>iframe-xhr-polling</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="supported-transports-by-name"></a><a href="#supported-transports-by-name" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supported transports, by name</h2>
<table>
<thead>
<tr><th><em>Transport</em></th><th><em>References</em></th></tr>
</thead>
<tbody>
<tr><td>websocket (rfc6455)</td><td>[rfc 6455]<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></td></tr>
<tr><td>websocket (hixie-76)</td><td>[draft-hixie-thewebsocketprotocol-76]<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></td></tr>
<tr><td>websocket (hybi-10)</td><td>[draft-ietf-hybi-thewebsocketprotocol-10]<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></td></tr>
<tr><td>xhr-streaming</td><td>Transport using [Cross domain XHR]<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup> [streaming]<sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup> capability (readyState=3).</td></tr>
<tr><td>xdr-streaming</td><td>Transport using [XDomainRequest]<sup class="footnote-ref"><a href="#fn1" id="fnref1:1">[1]</a></sup> [streaming]<sup class="footnote-ref"><a href="#fn6" id="fnref6:1">[6]</a></sup> capability (readyState=3).</td></tr>
<tr><td>eventsource</td><td>[EventSource/Server-sent events]<sup class="footnote-ref"><a href="#fn7" id="fnref7">[7]</a></sup>.</td></tr>
<tr><td>iframe-eventsource</td><td>[EventSource/Server-sent events]<sup class="footnote-ref"><a href="#fn7" id="fnref7:1">[7]</a></sup> used from an [iframe via postMessage]<sup class="footnote-ref"><a href="#fn8" id="fnref8">[8]</a></sup>.</td></tr>
<tr><td>htmlfile</td><td>[HtmlFile]<sup class="footnote-ref"><a href="#fn9" id="fnref9">[9]</a></sup>.</td></tr>
<tr><td>iframe-htmlfile</td><td>[HtmlFile]<sup class="footnote-ref"><a href="#fn9" id="fnref9:1">[9]</a></sup> used from an [iframe via postMessage]<sup class="footnote-ref"><a href="#fn8" id="fnref8:1">[8]</a></sup>.</td></tr>
<tr><td>xhr-polling</td><td>Long-polling using [cross domain XHR]<sup class="footnote-ref"><a href="#fn5" id="fnref5:1">[5]</a></sup>.</td></tr>
<tr><td>xdr-polling</td><td>Long-polling using [XDomainRequest]<sup class="footnote-ref"><a href="#fn1" id="fnref1:2">[1]</a></sup>.</td></tr>
<tr><td>iframe-xhr-polling</td><td>Long-polling using normal AJAX from an [iframe via postMessage]<sup class="footnote-ref"><a href="#fn8" id="fnref8:2">[8]</a></sup>.</td></tr>
<tr><td>jsonp-polling</td><td>Slow and old fashioned [JSONP polling]<sup class="footnote-ref"><a href="#fn10" id="fnref10">[10]</a></sup>. This transport will show &quot;busy indicator&quot; (aka: &quot;spinning wheel&quot;) when sending data.</td></tr>
</tbody>
</table>
<h2><a class="anchor" aria-hidden="true" id="connecting-to-sockjs-without-the-client"></a><a href="#connecting-to-sockjs-without-the-client" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Connecting to SockJS without the client</h2>
<p>Although the main point of SockJS is to enable browser-to-server
connectivity, it is possible to connect to SockJS from an external
application. Any SockJS server complying with 0.3 protocol does
support a raw WebSocket url. The raw WebSocket url for the test server
looks like:</p>
<ul>
<li><a href="ws://localhost:8081/echo/websocket">ws://localhost:8081/echo/websocket</a></li>
</ul>
<p>You can connect any WebSocket RFC 6455 compliant WebSocket client to
this url. This can be a command line client, external application,
third party code or even a browser (though I don't know why you would
want to do so).</p>
<h2><a class="anchor" aria-hidden="true" id="deployment"></a><a href="#deployment" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deployment</h2>
<p>You should use a version of sockjs-client
that supports the protocol used by your server. For example:</p>
<pre><code class="hljs css language-html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>For server-side deployment tricks, especially about load balancing and
session stickiness, take a look at the
<a href="https://github.com/sockjs/sockjs-node#readme">SockJS-node readme</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="development-and-testing"></a><a href="#development-and-testing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Development and testing</h2>
<p>SockJS-client needs <a href="https://nodejs.org/">node.js</a> for running a test
server and JavaScript minification. If you want to work on
SockJS-client source code, checkout the git repo and follow these
steps:</p>
<pre><code class="hljs">cd sockjs-client
npm install
</code></pre>
<p>To generate JavaScript, run:</p>
<pre><code class="hljs">gulp browserify
</code></pre>
<p>To generate minified JavaScript, run:</p>
<pre><code class="hljs">gulp browserify:min
</code></pre>
<p>Both commands output into the <code>build</code> directory.</p>
<h3><a class="anchor" aria-hidden="true" id="testing"></a><a href="#testing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testing</h3>
<p>Once you've compiled the SockJS-client you may want to check if your changes
pass all the tests.</p>
<pre><code class="hljs">npm run test:browser_local
</code></pre>
<p>This will start <a href="https://github.com/defunctzombie/zuul">zuul</a> and a test support server. Open the browser to <a href="http://localhost:9090/_zuul">http://localhost:9090/_zuul</a> and watch the tests run.</p>
<h2><a class="anchor" aria-hidden="true" id="browser-quirks"></a><a href="#browser-quirks" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Browser Quirks</h2>
<p>There are various browser quirks which we don't intend to address:</p>
<ul>
<li>Pressing ESC in Firefox, before Firefox 20, closes the SockJS connection. For a workaround
and discussion see <a href="https://github.com/sockjs/sockjs-client/issues/18">#18</a>.</li>
<li><code>jsonp-polling</code> transport will show a &quot;spinning wheel&quot; (aka. &quot;busy indicator&quot;)
when sending data.</li>
<li>You can't open more than one SockJS connection to one domain at the
same time due to <a href="https://stackoverflow.com/questions/985431/max-parallel-http-connections-in-a-browser">the browser's limit of concurrent connections</a>
(this limit is not counting native WebSocket connections).</li>
<li>Although SockJS is trying to escape any strange Unicode characters
(even invalid ones - <a href="https://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates">like surrogates \xD800-\xDBFF</a> or <a href="https://en.wikipedia.org/wiki/Unicode#Character_General_Category">\xFFFE and \xFFFF</a>)
it's advisable to use only valid characters. Using invalid
characters is a bit slower, and may not work with SockJS servers
that have proper Unicode support.</li>
<li>Having a global function called <code>onmessage</code> or such is probably a
bad idea, as it could be called by the built-in <code>postMessage</code> API.</li>
<li>From SockJS' point of view there is nothing special about
SSL/HTTPS. Connecting between unencrypted and encrypted sites
should work just fine.</li>
<li>Although SockJS does its best to support both prefix and cookie based
sticky sessions, the latter may not work well cross-domain with
browsers that don't accept third-party cookies by default (Safari).
In order to get around this make sure you're connecting to SockJS
from the same parent domain as the main site. For example
'sockjs.a.com' is able to set cookies if you're connecting from
'<a href="http://www.a.com'">www.a.com'</a> or '<a href="http://a.com'">a.com'</a>.</li>
<li>Trying to connect from secure &quot;https://&quot; to insecure &quot;http://&quot; is
not a good idea. The other way around should be fine.</li>
<li>Long polling is known to cause problems on Heroku, but a
<a href="https://github.com/sockjs/sockjs-node/issues/57#issuecomment-5242187">workaround for SockJS is available</a>.</li>
<li>SockJS <a href="https://github.com/sockjs/sockjs-client/issues/94">websocket transport is more stable over SSL</a>. If
you're a serious SockJS user then consider using SSL
(<a href="https://www.ietf.org/mail-archive/web/hybi/current/msg01605.html">more info</a>).</li>
</ul>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1"  class="footnote-item"><p><a href="https://blogs.msdn.microsoft.com/ieinternals/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds/">https://blogs.msdn.microsoft.com/ieinternals/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds/</a> <a href="#fnref1" class="footnote-backref">↩</a> <a href="#fnref1:1" class="footnote-backref">↩</a> <a href="#fnref1:2" class="footnote-backref">↩</a></p>
</li>
<li id="fn2"  class="footnote-item"><p><a href="https://www.rfc-editor.org/rfc/rfc6455.txt">https://www.rfc-editor.org/rfc/rfc6455.txt</a> <a href="#fnref2" class="footnote-backref">↩</a></p>
</li>
<li id="fn3"  class="footnote-item"><p><a href="https://tools.ietf.org/html/draft-hixie-thewebsocketprotocol-76">https://tools.ietf.org/html/draft-hixie-thewebsocketprotocol-76</a> <a href="#fnref3" class="footnote-backref">↩</a></p>
</li>
<li id="fn4"  class="footnote-item"><p><a href="https://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol-10">https://tools.ietf.org/html/draft-ietf-hybi-thewebsocketprotocol-10</a> <a href="#fnref4" class="footnote-backref">↩</a></p>
</li>
<li id="fn5"  class="footnote-item"><p><a href="https://secure.wikimedia.org/wikipedia/en/wiki/XMLHttpRequest#Cross-domain_requests">https://secure.wikimedia.org/wikipedia/en/wiki/XMLHttpRequest#Cross-domain_requests</a> <a href="#fnref5" class="footnote-backref">↩</a> <a href="#fnref5:1" class="footnote-backref">↩</a></p>
</li>
<li id="fn6"  class="footnote-item"><p><a href="http://www.debugtheweb.com/test/teststreaming.aspx">http://www.debugtheweb.com/test/teststreaming.aspx</a> <a href="#fnref6" class="footnote-backref">↩</a> <a href="#fnref6:1" class="footnote-backref">↩</a></p>
</li>
<li id="fn7"  class="footnote-item"><p><a href="https://html.spec.whatwg.org/multipage/comms.html#server-sent-events">https://html.spec.whatwg.org/multipage/comms.html#server-sent-events</a> <a href="#fnref7" class="footnote-backref">↩</a> <a href="#fnref7:1" class="footnote-backref">↩</a></p>
</li>
<li id="fn8"  class="footnote-item"><p><a href="https://developer.mozilla.org/en/DOM/window.postMessage">https://developer.mozilla.org/en/DOM/window.postMessage</a> <a href="#fnref8" class="footnote-backref">↩</a> <a href="#fnref8:1" class="footnote-backref">↩</a> <a href="#fnref8:2" class="footnote-backref">↩</a></p>
</li>
<li id="fn9"  class="footnote-item"><p><a href="http://cometdaily.com/2007/11/18/ie-activexhtmlfile-transport-part-ii/">http://cometdaily.com/2007/11/18/ie-activexhtmlfile-transport-part-ii/</a> <a href="#fnref9" class="footnote-backref">↩</a> <a href="#fnref9:1" class="footnote-backref">↩</a></p>
</li>
<li id="fn10"  class="footnote-item"><p><a href="https://secure.wikimedia.org/wikipedia/en/wiki/JSONP">https://secure.wikimedia.org/wikipedia/en/wiki/JSONP</a> <a href="#fnref10" class="footnote-backref">↩</a></p>
</li>
</ol>
</section>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#getting-started">Getting Started</a></li><li><a href="#sockjs-client-api">SockJS-client API</a><ul class="toc-headings"><li><a href="#sockjs-class">SockJS class</a></li></ul></li><li><a href="#supported-transports-by-browser-html-served-from-http-or-https">Supported transports, by browser (html served from http:// or https://)</a></li><li><a href="#supported-transports-by-browser-html-served-from-file">Supported transports, by browser (html served from file://)</a></li><li><a href="#supported-transports-by-name">Supported transports, by name</a></li><li><a href="#connecting-to-sockjs-without-the-client">Connecting to SockJS without the client</a></li><li><a href="#deployment">Deployment</a></li><li><a href="#development-and-testing">Development and testing</a><ul class="toc-headings"><li><a href="#testing">Testing</a></li></ul></li><li><a href="#browser-quirks">Browser Quirks</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/underbase/" class="nav-home"><img src="/underbase/img/logo.svg" alt="Underbase" width="66" height="58"/></a><div><h5>Docs</h5><a href="/underbase/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/underbase/docs/en/doc2.html">Guides (or other categories)</a><a href="/underbase/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/underbase/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div></body></html>