<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>node_modules/remarkable/docs/parsing_inline · Underbase</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;inline-rules&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#inline-rules&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Inline rules&lt;/h1&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="node_modules/remarkable/docs/parsing_inline · Underbase"/><meta property="og:type" content="website"/><meta property="og:url" content="https://sundowndev.github.io/underbase/"/><meta property="og:description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;inline-rules&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#inline-rules&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Inline rules&lt;/h1&gt;
"/><meta property="og:image" content="https://sundowndev.github.io/underbase/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://sundowndev.github.io/underbase/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/underbase/img/logo.svg"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://sundowndev.github.io/underbase/blog/atom.xml" title="Underbase Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://sundowndev.github.io/underbase/blog/feed.xml" title="Underbase Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/underbase/js/scrollSpy.js"></script><link rel="stylesheet" href="/underbase/css/main.css"/><script src="/underbase/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/underbase/"><img class="logo" src="/underbase/img/logo.svg" alt="Underbase"/><h2 class="headerTitleWithLogo">Underbase</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/underbase/docs/installation" target="_self">Guides</a></li><li class=""><a href="/underbase/docs/api" target="_self">API</a></li><li class=""><a href="/underbase/blog/" target="_self">Release notes</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">node_modules/remarkable/docs/parsing_inline</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="inline-rules"></a><a href="#inline-rules" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Inline rules</h1>
<p>The inline rules are responsible for parsing inline Markdown syntax formatting
only part of a line of text and emitting the <a href="/underbase/docs/node_modules/remarkable/docs/parser">tokens</a> required to
represent them. For example, a link, bold, emphasis, super/sub scripts, inline
code, and so on.</p>
<p>An inline rule is a function expecting two argumnents:</p>
<ol>
<li><code>state</code>: an instance of <code>StateInline</code></li>
<li><code>checkMode</code>: a flag indicating whether we should simply check if the current
position marks the begining of the syntax we are trying to parse.</li>
</ol>
<p>The <code>checkMode</code> is here for optimization, if it's set to <code>true</code>, we can return
<code>true</code> as soon as we are sure the present position marks the beginning of an
inline syntax we are trying to parse (For example, in the case of emphasized
(italic) text, the check would be &quot;Is the current position a '*' or a '_'?&quot;).</p>
<h2><a class="anchor" aria-hidden="true" id="state-inline"></a><a href="#state-inline" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>State inline</h2>
<p>The definition for <code>StateInline</code> prototype is in <code>rules_inline/state_inline.js</code>
and its data consists of:</p>
<ul>
<li><code>src</code>: the complete string the parser is currently working on (i.e. the
current line/block content).</li>
<li><code>parser</code>: The current inline parser (here to make nested calls easier)</li>
<li><code>env</code>: a namespaced data key-value store to allow core rules to exchange data</li>
<li><code>tokens</code>: the tokens generated by the parser up to now</li>
<li><code>pos</code>: the current position in <code>src</code> reached by the parser</li>
<li><code>posMax</code>: the last position available in <code>src</code></li>
<li><code>level</code>: the nested level for the current inline rule</li>
</ul>
<p>The most important methods are:</p>
<ul>
<li><code>push(token)</code>: adds a new token to the (end of the) output</li>
<li><code>cacheSet(key, value)</code>: adds a new value to the cache key-value store. <code>key</code>
MUST be a non-negative integer (<code>&gt;= 0</code>) and value MUST a positive integer (<code>&gt; 0</code>)</li>
<li><code>cacheGet(key)</code>: fetches a value from the cache key-value store. <code>key</code> MUST be
a non-negative integer (<code>&gt;= 0</code>)</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="rule-parser-behaviour"></a><a href="#rule-parser-behaviour" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rule parser behaviour</h2>
<p>If <code>checkMode</code> is set to true, simply return a boolean depending on whether the
current position should be considered has the begining of your
syntax. Otherwise, proceed with the complete parsing.</p>
<p>NB: It is your responsibility to make sure you have reached the maximum nesting
level allowed by comparing <code>state.level</code> and <code>state.options.maxNesting</code>.</p>
<p>NB: If for any reason, the syntax you are trying to parse is incorrectly
formated and you are unable to parse it, you must abort and return <code>false</code>
without modifying <code>state</code> in any way.</p>
<p>To completely parse a block, you will need to push new <a href="/underbase/docs/node_modules/remarkable/docs/parser">tokens</a> by
calling <code>state.push(token)</code>.</p>
<p>Once you are sure the current position marks the beginning of the syntax you are
trying to parse, you should push an <a href="/underbase/docs/node_modules/remarkable/docs/parser">open tag token</a> corresponding to
the begining of your inline section. You will also need to find its end.</p>
<p>Your next decision should be whether you wish to allow other inline syntaxes to
be nested in your content or not. If you do, you will need to invoke
<code>state.parser.tokenize(state)</code> with an updated <code>state</code> accordingly to allow the
next batch of rules to run smoothly (incl. updating <code>pos</code>, <code>posMax</code> and
<code>level</code>). Don't forget to restore the previous values afterward.</p>
<p>The last token you will need to emit is the <a href="/underbase/docs/node_modules/remarkable/docs/parser">end tag token</a> for your
inline section.</p>
<p>Finally, you will need to update <code>state.pos</code> to the first position after the
part of <code>src</code> you processed and return <code>true</code>.</p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#state-inline">State inline</a></li><li><a href="#rule-parser-behaviour">Rule parser behaviour</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/underbase/" class="nav-home"><img src="/underbase/img/logo.svg" alt="Underbase" width="66" height="58"/></a><div><h5>Docs</h5><a href="/underbase/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/underbase/docs/en/doc2.html">Guides (or other categories)</a><a href="/underbase/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/underbase/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div></body></html>