version: 2.0
jobs:
 build:
   docker:
      - image: node:8
   working_directory: ~/repo
   steps:
      - checkout

      # Download and cache dependencies
      - restore_cache:
          keys:
          - v1-dependencies-{{ checksum "package.json" }}
          # fallback to using the latest cache if no exact match is found
          - v1-dependencies-

      - run:
         name: Installation
         command: npm install
      - run:
         name: Build
         command: npm run build
      - run:
         name: Lint
         command: npm run lint
      - run:
         name: Test
         command: bash ./test.sh
